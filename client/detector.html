<!DOCTYPE html>
<!--
  Detector Page - ISL Recognition Platform

  Modern UI with sidebar navigation
  Features:
  - Left sidebar with navigation and quick reference
  - Center camera feed with detection controls
  - Right panel with current word, sentence, and stats
  - Browser-based camera with API backend processing
-->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ISL Recognition Platform - Live Detection</title>
    <!-- Base styles -->
    <link rel="stylesheet" href="static/css/base.css" />
    <!-- Page-specific styles -->
    <link rel="stylesheet" href="static/css/detector.css" />
    <!-- External CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-brand">
          <i class="fas fa-hands nav-icon"></i>
          <span class="brand-text">ISL Translator</span>
        </div>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="index.html" class="nav-link">
              <i class="fas fa-home"></i> Home
            </a>
          </li>
          <li class="nav-item">
            <a href="detector.html" class="nav-link active">
              <i class="fas fa-video"></i> Sign to Text
            </a>
          </li>
          <li class="nav-item">
            <a href="voice_to_sign.html" class="nav-link">
              <i class="fas fa-microphone-alt"></i> Voice to Sign
            </a>
          </li>
          <li class="nav-item">
            <a href="about.html" class="nav-link">
              <i class="fas fa-info-circle"></i> About
            </a>
          </li>
        </ul>
        <div class="nav-toggle">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>

    <!-- Main Detector Layout -->
    <div class="isl-platform-container">
      <!-- Left Sidebar Navigation -->
      <aside class="isl-sidebar">
        <div class="isl-sidebar-section">
          <h3>QUICK REFERENCE</h3>
          <div class="isl-quick-ref-grid" id="quickRefGrid">
            <!-- Generated by JS or static -->
            <div class="isl-ref-item">
              <img src="static/images/A.jpg" alt="A" />
              <span class="isl-ref-letter">A</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/B.jpg" alt="B" />
              <span class="isl-ref-letter">B</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/C.jpg" alt="C" />
              <span class="isl-ref-letter">C</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/D.jpg" alt="D" />
              <span class="isl-ref-letter">D</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/E.jpg" alt="E" />
              <span class="isl-ref-letter">E</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/F.jpg" alt="F" />
              <span class="isl-ref-letter">F</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/G.jpg" alt="G" />
              <span class="isl-ref-letter">G</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/H.jpg" alt="H" />
              <span class="isl-ref-letter">H</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/I.jpg" alt="I" />
              <span class="isl-ref-letter">I</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/J.jpg" alt="J" />
              <span class="isl-ref-letter">J</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/K.jpg" alt="K" />
              <span class="isl-ref-letter">K</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/L.jpg" alt="L" />
              <span class="isl-ref-letter">L</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/M.jpg" alt="M" />
              <span class="isl-ref-letter">M</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/N.jpg" alt="N" />
              <span class="isl-ref-letter">N</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/O.jpg" alt="O" />
              <span class="isl-ref-letter">O</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/P.jpg" alt="P" />
              <span class="isl-ref-letter">P</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/Q.jpg" alt="Q" />
              <span class="isl-ref-letter">Q</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/R.jpg" alt="R" />
              <span class="isl-ref-letter">R</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/S.jpg" alt="S" />
              <span class="isl-ref-letter">S</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/T.jpg" alt="T" />
              <span class="isl-ref-letter">T</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/U.jpg" alt="U" />
              <span class="isl-ref-letter">U</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/V.jpg" alt="V" />
              <span class="isl-ref-letter">V</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/W.jpg" alt="W" />
              <span class="isl-ref-letter">W</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/X.jpg" alt="X" />
              <span class="isl-ref-letter">X</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/Y.jpg" alt="Y" />
              <span class="isl-ref-letter">Y</span>
            </div>
            <div class="isl-ref-item">
              <img src="static/images/Z.jpg" alt="Z" />
              <span class="isl-ref-letter">Z</span>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="isl-main-content">
        <!-- Camera Feed and Controls -->
        <div class="isl-camera-section">
          <div class="isl-video-wrapper">
            <div class="isl-video-container">
              <!-- Video Placeholder -->
              <div class="isl-video-placeholder" id="videoPlaceholder">
                <div class="isl-camera-icon">
                  <i class="fas fa-camera"></i>
                </div>
                <h3>Camera Standby</h3>
                <p>Click "Start Detection" to activate</p>
              </div>

              <!-- Live Video Feed (Browser Camera) -->
              <video id="videoFeed" autoplay playsinline style="display: none"></video>

              <!-- Video Canvas (for processing) -->
              <canvas id="videoCanvas" style="display: none"></canvas>
            </div>

            <!-- Video Controls Bar -->
            <div class="isl-video-controls">
              <button id="startBtn" class="isl-btn isl-btn-start">
                <i class="fas fa-play"></i>
                <span>Start Detection</span>
              </button>
              <button
                id="stopBtn"
                class="isl-btn isl-btn-stop"
                style="display: none"
              >
                <i class="fas fa-stop"></i>
                <span>Stop Detection</span>
              </button>
            </div>
          </div>

          <!-- Letter Hold Duration -->
          <div class="isl-duration-display">
            <span class="isl-duration-label">Letter Hold Duration</span>
            <div class="isl-duration-bar">
              <div class="isl-duration-fill" id="letterProgress"></div>
            </div>
            <span class="isl-duration-time" id="letterProgressText">0.0s / 1.5s</span>
          </div>

          <!-- Space Gesture Duration (ASL 'H') -->
          <div
            class="isl-duration-display isl-space-duration"
            id="spaceDurationContainer"
            style="display: none"
          >
            <span class="isl-duration-label">Space Gesture (ASL 'H') Duration</span>
            <div class="isl-duration-bar isl-space-bar">
              <div
                class="isl-duration-fill isl-space-fill"
                id="spaceProgress"
              ></div>
            </div>
            <span class="isl-duration-time" id="spaceProgressText">0.0s / 1.5s</span>
          </div>
        </div>
      </main>

      <!-- Right Sidebar Panel -->
      <aside class="isl-right-panel">
        <!-- Current Word Section -->
        <div class="isl-panel-section">
          <div class="isl-section-header">
            <h3>CURRENT WORD</h3>
            <button
              id="backspaceBtn"
              class="isl-backspace-btn"
              title="Backspace (Delete last character)"
            >
              <i class="fas fa-backspace"></i>
              Backspace
            </button>
          </div>
          <div class="isl-word-display" id="currentWord">
            <span class="isl-placeholder">Sign to begin</span>
          </div>
        </div>

        <!-- Full Sentence Section -->
        <div class="isl-panel-section">
          <div class="isl-section-header">
            <h3>FULL SENTENCE</h3>
            <button
              id="saveSentenceBtn"
              class="isl-export-btn"
              title="Export sentence"
            >
              Export
            </button>
          </div>
          <div class="isl-sentence-display" id="currentSentence">
            <span class="isl-placeholder">Your sentence will appear here...</span>
          </div>
        </div>

        <!-- Currently Detecting Display -->
        <div class="isl-panel-section">
          <h3 class="isl-section-title">CURRENTLY DETECTING</h3>
          <div class="isl-detecting-display" id="detectedLetter" data-state="idle">
            <span class="isl-detected-letter">-</span>
          </div>
        </div>

        <!-- Reset Sentence Button -->
        <button id="resetSentenceBtn" class="isl-btn isl-btn-reset-full">
          <i class="fas fa-trash"></i>
          <span>Reset All</span>
        </button>
      </aside>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status">
      <span class="status-dot"></span>
      <span class="status-text">Backend Disconnected</span>
    </div>

    <!-- Configuration -->
    <script>
      // API endpoint configuration
      // Change this to your Render backend URL after deployment
      window.API_BASE_URL = 'http://localhost:5001';

      // For production, use your Render URL:
      // window.API_BASE_URL = 'https://your-app-name.onrender.com';
    </script>
    <script src="static/js/main.js"></script>
    <script src="static/js/detector.js"></script>
  </body>
</html>
